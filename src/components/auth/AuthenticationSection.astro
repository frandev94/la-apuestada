---
import type { Session } from '@auth/core/types';
import { SignIn, SignOut } from 'auth-astro/components';
import DiscordButton from './DiscordButton.astro';

export interface Props {
  session?: Session | null;
}

const { session } = Astro.props;
---

<div class="hidden md:flex items-center space-x-4">
  {
    session ? (
      // Authenticated User
      <div class="flex items-center space-x-3">
        {session.user?.image && (
          <img
            src={session.user.image}
            alt="Profile"
            class="w-8 h-8 rounded-full border border-white/20"
          />
        )}
        <div class="flex flex-col">
          <span class="text-sm font-medium text-white">
            {session.user?.name}
          </span>
          <span class="text-xs text-gray-300">Discord User</span>
        </div>
        <a
          href="/profile"
          class="px-3 py-1 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors"
        >
          Profile
        </a>
        <SignOut class="px-3 py-1 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors">
          Sign Out
        </SignOut>
      </div>
    ) : (
      // Not authenticated
      <DiscordButton />
    )
  }
</div>
