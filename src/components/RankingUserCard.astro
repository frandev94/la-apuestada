---
// RankingUserCard.astro
// Tarjeta de usuario para el ranking
const { user, idx, percent, isWinner } = Astro.props;
---

<div
  class={`flex flex-col md:flex-row items-center gap-4 bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 shadow-lg hover:bg-white/15 transition-all duration-300 ${
    isWinner ? "ring-4 ring-yellow-400/80" : ""
  }`}
>
  <div class="flex items-center gap-4 w-full md:w-1/3">
    <span class="text-2xl font-bold text-yellow-400">#{idx + 1}</span>
    <img
      src={user.image}
      alt={user.name}
      class={`w-12 h-12 rounded-full border-2 ${
        isWinner ? "border-yellow-300" : "border-yellow-400"
      } bg-white object-cover`}
    />
    <span class="text-lg font-semibold text-white">
      <span
        class={user.correct === user.total && user.total > 0
          ? "bg-gradient-to-r from-yellow-300 via-yellow-500 to-yellow-300 bg-clip-text text-transparent font-extrabold animate-gold-shine"
          : ""}
        style={user.correct === user.total && user.total > 0
          ? "background-size: 200% 100%;"
          : ""}
      >
        {user.name}
      </span>
      {
        isWinner && (
          <span title="Â¡Ganador/a!" class="ml-2 text-yellow-200 animate-pulse">
            ðŸ‘‘
          </span>
        )
      }
    </span>
  </div>
  <div class="flex-1 w-full">
    <div
      class="w-full h-8 bg-red-500/30 rounded-lg overflow-hidden flex relative border border-white/10"
    >
      <div
        class="bg-green-400/80 h-full transition-all duration-500"
        style={`width: ${percent}%`}
      >
      </div>
      <div
        class="bg-red-500/80 h-full transition-all duration-500"
        style={`width: ${100 - percent}%`}
      >
      </div>
      <div
        class="absolute inset-0 flex items-center justify-center text-white font-bold text-sm drop-shadow"
      >
        {user.correct} aciertos / {user.total - user.correct} fallos
      </div>
    </div>
  </div>
</div>
<style>
  @keyframes gold-shine {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: 0 0;
    }
  }
  .animate-gold-shine {
    animation: gold-shine 2.5s linear infinite;
  }
</style>
